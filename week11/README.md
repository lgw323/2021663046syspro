# ğŸ“ 11ì£¼ì°¨ í•™ìŠµ ì •ë¦¬

## ğŸ“… ë‚ ì§œ
- 2025-05-16

## ğŸ“Œ ì£¼ì œ
- Inodeì™€ ë§í¬(Link) ë™ì‘ ì›ë¦¬ ë³µìŠµ
- ëª…ë ¹ì–´ ì˜µì…˜ íŒŒì‹±: `getopt()`, `getopt_long()`
- ì…¸ì˜ ëª…ë ¹ì–´ ì‹¤í–‰ ì›ë¦¬: `fork()`ì™€ `exec()`
- í•˜ë“œ ë§í¬, ì‹¬ë³¼ë¦­ ë§í¬, í”„ë¡œì„¸ìŠ¤ ìƒì„± ì‹¤ìŠµ

---

## ğŸ“– ì´ë¡  ì •ë¦¬

### ğŸ”¹ Inodeì™€ ë§í¬ ë³µìŠµ
- **Inode(ì•„ì´ë…¸ë“œ)**: íŒŒì¼ì´ë‚˜ ë””ë ‰í† ë¦¬ì— ëŒ€í•œ ëª¨ë“  ë©”íƒ€ë°ì´í„°(íŒŒì¼ í¬ê¸°, ì†Œìœ ì, ê¶Œí•œ, ë°ì´í„° ë¸”ë¡ ìœ„ì¹˜ ë“±)ë¥¼ ì €ì¥í•˜ëŠ” ë°ì´í„° êµ¬ì¡°ì…ë‹ˆë‹¤. íŒŒì¼ ì´ë¦„ì€ ë‹¨ì§€ íŠ¹ì • Inodeë¥¼ ê°€ë¦¬í‚¤ëŠ” í¬ì¸í„° ì—­í• ì„ í•©ë‹ˆë‹¤.
- **í•˜ë“œ ë§í¬(Hard Link)**: í•˜ë‚˜ì˜ Inodeì— ì—¬ëŸ¬ ê°œì˜ íŒŒì¼ ì´ë¦„ì„ ì—°ê²°í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ëª¨ë“  í•˜ë“œ ë§í¬ëŠ” ë™ì¼í•œ Inodeë¥¼ ê°€ë¦¬í‚¤ë¯€ë¡œ, ì‚¬ì‹¤ìƒ ê°™ì€ íŒŒì¼ì— ëŒ€í•œ ë‹¤ë¥¸ ì´ë¦„ì…ë‹ˆë‹¤. Inodeì˜ **ë§í¬ ì¹´ìš´íŠ¸(Link Count)**ëŠ” í•´ë‹¹ Inodeë¥¼ ê°€ë¦¬í‚¤ëŠ” íŒŒì¼ ì´ë¦„ì˜ ê°œìˆ˜ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.
- **ì‹¬ë³¼ë¦­ ë§í¬(Symbolic Link)**: ì›ë³¸ íŒŒì¼ì˜ ê²½ë¡œë¥¼ í…ìŠ¤íŠ¸ë¡œ ì €ì¥í•˜ê³  ìˆëŠ” íŠ¹ìˆ˜í•œ íŒŒì¼ì…ë‹ˆë‹¤. ì›ë³¸ íŒŒì¼ì„ ê°€ë¦¬í‚¤ëŠ” 'ë°”ë¡œ ê°€ê¸°'ì™€ ìœ ì‚¬í•˜ë©°, ê³ ìœ í•œ Inodeë¥¼ ê°€ì§‘ë‹ˆë‹¤.

### ğŸ”¹ ëª…ë ¹ì–´ ì˜µì…˜ íŒŒì‹±: `getopt()` ì™€ `getopt_long()`
C í”„ë¡œê·¸ë¨ì—ì„œ `ls -al` ì²˜ëŸ¼ ëª…ë ¹ì–´ ë’¤ì— ë¶™ëŠ” ì˜µì…˜(argument)ì„ ì²´ê³„ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë˜ëŠ” í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ í•¨ìˆ˜ì…ë‹ˆë‹¤.

- **`getopt()`**: `-a`, `-l`ê³¼ ê°™ì´ í•œ ê¸€ìë¡œ ëœ ì§§ì€ ì˜µì…˜ì„ íŒŒì‹±í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. `main` í•¨ìˆ˜ì˜ `argv` ë°°ì—´ì„ ìˆœíšŒí•˜ë©° ì •ì˜ëœ ì˜µì…˜ì„ ì°¾ì•„ ì²˜ë¦¬í•˜ê³ , `optarg` ì „ì—­ ë³€ìˆ˜ë¥¼ í†µí•´ ì˜µì…˜ì— ë”¸ë¦° ì¸ì(ì˜ˆ: `-f filename`ì˜ `filename`)ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- **`getopt_long()`**: `getopt()`ì˜ í™•ì¥ ë²„ì „ìœ¼ë¡œ, `--all`, `--list`ì²˜ëŸ¼ ê¸´ ì´ë¦„ì˜ ì˜µì…˜ë„ í•¨ê»˜ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. `struct option` êµ¬ì¡°ì²´ ë°°ì—´ì„ ì‚¬ìš©í•˜ì—¬ ê¸´ ì˜µì…˜ì˜ ì´ë¦„, ì¸ì í•„ìš” ì—¬ë¶€ ë“±ì„ ì •ì˜í•©ë‹ˆë‹¤.

### ğŸ”¹ ì…¸ì˜ ëª…ë ¹ì–´ ì‹¤í–‰ ì›ë¦¬ (chap8.pdf)
ì…¸(Shell)ì´ ì‚¬ìš©ìì˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ëŠ” ê³¼ì •ì€ ìƒˆë¡œìš´ í”„ë¡œì„¸ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” ëŒ€í‘œì ì¸ ì˜ˆì‹œì´ë©°, `fork()`ì™€ `exec()` ì‹œìŠ¤í…œ í˜¸ì¶œì´ í•µì‹¬ì ì¸ ì—­í• ì„ í•©ë‹ˆë‹¤.

- **`fork()` ì‹œìŠ¤í…œ í˜¸ì¶œ**: í˜„ì¬ ì‹¤í–‰ ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤(ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤, ì˜ˆ: ì…¸)ë¥¼ ê±°ì˜ ì™„ë²½í•˜ê²Œ ë³µì œí•˜ì—¬ ìƒˆë¡œìš´ ìì‹ í”„ë¡œì„¸ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ìì‹ í”„ë¡œì„¸ìŠ¤ëŠ” ë¶€ëª¨ì˜ ì½”ë“œ, ë°ì´í„°, ì—´ë¦° íŒŒì¼ ë””ìŠ¤í¬ë¦½í„° ë“±ì„ ëª¨ë‘ ìƒì†ë°›ìŠµë‹ˆë‹¤.
- **`exec()` ê³„ì—´ í•¨ìˆ˜**: `fork()`ë¡œ ìƒì„±ëœ ìì‹ í”„ë¡œì„¸ìŠ¤ê°€ ìì‹ ì˜ ë©”ëª¨ë¦¬ ê³µê°„ì„ ì™„ì „íˆ ìƒˆë¡œìš´ í”„ë¡œê·¸ë¨ì˜ ì´ë¯¸ì§€ë¡œ ë®ì–´ì“°ê²Œ ë§Œë“­ë‹ˆë‹¤. ì¦‰, ìì‹ í”„ë¡œì„¸ìŠ¤ëŠ” ë” ì´ìƒ ì…¸ì˜ ë³µì‚¬ë³¸ì´ ì•„ë‹Œ, ì‹¤í–‰í•˜ê³ ì í•˜ëŠ” ìƒˆë¡œìš´ í”„ë¡œê·¸ë¨(ì˜ˆ: `ls`)ì´ ë©ë‹ˆë‹¤.
- **`wait()` ì‹œìŠ¤í…œ í˜¸ì¶œ**: ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤ëŠ” `wait()`ë¥¼ í˜¸ì¶œí•˜ì—¬ ìì‹ í”„ë¡œì„¸ìŠ¤ê°€ ì¢…ë£Œë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦½ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ëª…ë ¹ì–´ ì‹¤í–‰ì´ ëë‚œ í›„ ë‹¤ìŒ í”„ë¡¬í”„íŠ¸ë¥¼ ë„ìš°ëŠ” ë™ê¸°ì ì¸ ì‘ì—… íë¦„ì´ ê°€ëŠ¥í•´ì§‘ë‹ˆë‹¤.

---

## ğŸ› ï¸ ì‹¤ìŠµ ë‚´ìš©

### 1. í•˜ë“œ ë§í¬ì™€ ì‹¬ë³¼ë¦­ ë§í¬ ë™ì‘ í™•ì¸
`ls -li` ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ Inode ë²ˆí˜¸ì™€ ë§í¬ ì¹´ìš´íŠ¸ì˜ ë³€í™”ë¥¼ ì§ì ‘ ê´€ì°°í•˜ë©° ë‘ ë§í¬ì˜ ì°¨ì´ì ì„ í™•ì¸í•©ë‹ˆë‹¤.

- **í•˜ë“œ ë§í¬ ì‹¤ìŠµ**: ì—¬ëŸ¬ ê°œì˜ íŒŒì¼ ì´ë¦„ì´ **í•˜ë‚˜ì˜ Inode(ë°ì´í„°)**ë¥¼ ê³µìœ í•˜ë©° ë§í¬ ì¹´ìš´íŠ¸ê°€ ë³€í•˜ëŠ” ê²ƒì„ í™•ì¸í•©ë‹ˆë‹¤.
  ```bash
  # a.txt ìƒì„± í›„ í•˜ë“œ ë§í¬ b, c, d ìƒì„±
  echo "Original Data" > a.txt
  ln a.txt b.txt && ln a.txt c.txt && ln a.txt d.txt
  
  # ë„¤ íŒŒì¼ ëª¨ë‘ Inode ë²ˆí˜¸ê°€ ê°™ê³ , ë§í¬ ì¹´ìš´íŠ¸ê°€ 4ë¡œ í‘œì‹œë¨
  ls -li a.txt b.txt c.txt d.txt
  
  # ë§í¬ ì¤‘ í•˜ë‚˜ì¸ c.txt ì‚­ì œ
  rm c.txt
  
  # ë‚˜ë¨¸ì§€ íŒŒì¼ì€ ì˜í–¥ì´ ì—†ìœ¼ë©°, ë§í¬ ì¹´ìš´íŠ¸ë§Œ 3ìœ¼ë¡œ ê°ì†Œ
  ls -li a.txt b.txt d.txt
  ```

- **ì‹¬ë³¼ë¦­ ë§í¬ ì‹¤ìŠµ**: ì›ë³¸ì„ ê°€ë¦¬í‚¤ëŠ” ë³„ë„ì˜ íŒŒì¼ì´ ìƒì„±ë˜ëŠ” ê²ƒì„ í™•ì¸í•©ë‹ˆë‹¤.
  ```bash
  # a.txtë¥¼ ê°€ë¦¬í‚¤ëŠ” ì‹¬ë³¼ë¦­ ë§í¬ e.txt ìƒì„±
  ln -s a.txt e.txt
  
  # e.txtëŠ” ë³„ë„ì˜ Inodeë¥¼ ê°€ì§€ë©°, íŒŒì¼ íƒ€ì…ì´ 'l'ë¡œ í‘œì‹œë¨ (e.txt -> a.txt)
  ls -li a.txt e.txt
  ```

### 2. `getopt()`ë¥¼ ì´ìš©í•œ ì˜µì…˜ ì²˜ë¦¬ ì˜ˆì œ
ëª…ë ¹í–‰ ì¸ìë¡œ `-n`ê³¼ `-f <íŒŒì¼ëª…>` ì˜µì…˜ì„ ë°›ëŠ” C í”„ë¡œê·¸ë¨ ì˜ˆì œì…ë‹ˆë‹¤.

```c
#include <stdio.h>
#include <unistd.h> // getopt()ë¥¼ ìœ„í•´ í•„ìš”

int main(int argc, char *argv[]) {
    int opt;
    char *filename = NULL;

    while ((opt = getopt(argc, argv, "f:")) != -1) {
        switch (opt) {
            case 'f':
                filename = optarg; // optargëŠ” f ì˜µì…˜ì˜ ì¸ìë¥¼ ê°€ë¦¬í‚´
                break;
            case '?': // ì¸ì‹í•  ìˆ˜ ì—†ëŠ” ì˜µì…˜
            default:
                fprintf(stderr, "ì‚¬ìš©ë²•: %s [-f íŒŒì¼ëª…]\n", argv[0]);
                return 1;
        }
    }

    if (filename != NULL) {
        printf("ì „ë‹¬ëœ íŒŒì¼ëª…: %s\n", filename);
    } else {
        printf("íŒŒì¼ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”. (ì˜ˆ: -f a.txt)\n");
    }

    return 0;
}
```

### 3. `fork()`ì™€ `exec()`ë¥¼ ì´ìš©í•œ ëª…ë ¹ì–´ ì‹¤í–‰
`fork()`ë¡œ ìì‹ í”„ë¡œì„¸ìŠ¤ë¥¼ ë§Œë“¤ê³ , ìì‹ í”„ë¡œì„¸ìŠ¤ê°€ `exec()`ë¥¼ ì´ìš©í•´ `ls -l` ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ëŠ” í”„ë¡œê·¸ë¨ì…ë‹ˆë‹¤. ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤ëŠ” ìì‹ì´ ëë‚  ë•Œê¹Œì§€ `wait()`ë¡œ ê¸°ë‹¤ë¦½ë‹ˆë‹¤.

```c
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/wait.h>

int main() {
    pid_t pid;

    // ìì‹ í”„ë¡œì„¸ìŠ¤ ìƒì„±
    pid = fork();

    if (pid < 0) { // fork ì‹¤íŒ¨
        fprintf(stderr, "Fork Failed\n");
        return 1;
    } else if (pid == 0) { // ìì‹ í”„ë¡œì„¸ìŠ¤
        printf("ìì‹ í”„ë¡œì„¸ìŠ¤: ls -l ì‹¤í–‰\n");
        // execlpëŠ” PATH í™˜ê²½ë³€ìˆ˜ë¥¼ ê²€ìƒ‰í•˜ì—¬ 'ls'ë¥¼ ì°¾ì•„ ì‹¤í–‰
        execlp("/bin/ls", "ls", "-l", NULL);
    } else { // ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤
        // ìì‹ í”„ë¡œì„¸ìŠ¤ê°€ ì¢…ë£Œë  ë•Œê¹Œì§€ ëŒ€ê¸°
        wait(NULL);
        printf("ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤: ìì‹ í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œë¨\n");
    }

    return 0;
}
```

### ğŸ”¹ í•™ìŠµ ì¡°ì–¸ (êµìˆ˜ë‹˜ ì½”ë©˜íŠ¸)
- ì´ë¡  í•™ìŠµ ì™¸ì—ë„, ê°œì¸ì ìœ¼ë¡œ í¥ë¯¸ ìˆëŠ” ì£¼ì œë¡œ ì½”ë”©ì„ í•´ë³´ê±°ë‚˜, ê°„ë‹¨í•œ ì•±ì„ ë§Œë“¤ì–´ë³´ê³  ì™¸ë¶€ APIë¥¼ ì‚¬ìš©í•˜ëŠ” ë“± ì‹¤ì œ í”„ë¡œì íŠ¸ ê²½í—˜ì„ ìŒ“ëŠ” ê²ƒì´ ì‹¤ë ¥ í–¥ìƒì— í° ë„ì›€ì´ ë©ë‹ˆë‹¤.